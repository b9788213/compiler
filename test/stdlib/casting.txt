fn atoi(s):
    asm "xor rax, rax"
    asm "xor rcx, rcx"
    asm ".check_sign:"
    asm "movzx rdx, byte [rdi]"
    asm "cmp dl, '-'"
    asm "je .prepare_negative"
    asm "cmp dl, '+'"
    asm "jne .atoi_loop"
    asm "inc rcx"
    asm "jmp .atoi_loop"
    asm ".prepare_negative:"
    asm "inc rcx"
    asm ".neg_loop:"
    asm "movzx rdx, byte [rdi + rcx]"
    asm "test dl, dl"
    asm "jz .apply_neg"
    asm "cmp dl, '0'"
    asm "jl .apply_neg"
    asm "cmp dl, '9'"
    asm "jg .apply_neg"
    asm "sub dl, '0'"
    asm "imul rax, 10"
    asm "add rax, rdx"
    asm "inc rcx"
    asm "jmp .neg_loop"
    asm ".apply_neg:"
    asm "neg rax"
    asm "jmp .exit"
    asm ".atoi_loop:"
    asm "movzx rdx, byte [rdi + rcx]"
    asm "test dl, dl"
    asm "jz .exit"
    asm "cmp dl, '0'"
    asm "jl .exit"
    asm "cmp dl, '9'"
    asm "jg .exit"
    asm "sub dl, '0'"
    asm "imul rax, 10"
    asm "add rax, rdx"
    asm "inc rcx"
    asm "jmp .atoi_loop"